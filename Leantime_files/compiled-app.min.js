var leantime=leantime||{},themeColor=jQuery("meta[name=theme-color]").attr("content");leantime.companyColor=themeColor;var appURL=jQuery("meta[name=identifier-URL]").attr("content");function naturalSort(a,b){var re=/(^-?[0-9]+(\.?[0-9]*)[df]?e?[0-9]?$|^0x[0-9a-f]+$|[0-9]+)/gi,sre=/(^[ ]*|[ ]*$)/g,dre=/(^([\w ]+,?[\w ]+)?[\w ]+,?[\w ]+\d+:\d+(:\d+)?[\w ]?|^\d{1,4}[\/\-]\d{1,4}[\/\-]\d{1,4}|^\w+, \w+ \d+, \d{4})/,hre=/^0x[0-9a-f]+$/i,ore=/^0/,x=a.toString().replace(sre,"")||"",y=b.toString().replace(sre,"")||"",xN=x.replace(re,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),yN=y.replace(re,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),xD=parseInt(x.match(hre))||1!=xN.length&&x.match(dre)&&Date.parse(x),yD=parseInt(y.match(hre))||xD&&y.match(dre)&&Date.parse(y)||null;if(yD){if(xD<yD)return-1;if(yD<xD)return 1}for(var cLoc=0,numS=Math.max(xN.length,yN.length);cLoc<numS;cLoc++){if(oFxNcL=!(xN[cLoc]||"").match(ore)&&parseFloat(xN[cLoc])||xN[cLoc]||0,oFyNcL=!(yN[cLoc]||"").match(ore)&&parseFloat(yN[cLoc])||yN[cLoc]||0,isNaN(oFxNcL)!==isNaN(oFyNcL))return isNaN(oFxNcL)?1:-1;if(typeof oFxNcL!=typeof oFyNcL&&(oFxNcL+="",oFyNcL+=""),oFxNcL<oFyNcL)return-1;if(oFxNcL>oFyNcL)return 1}return 0}function removeHTMLTags(string){var strInputCode=string;return(strInputCode=strInputCode.replace(/&(lt|gt);/g,function(strMatch,p1){return"lt"==p1?"<":">"})).replace(/<\/?[^>]+(>|$)/g,"")}function fnCreateSelect(aData){aData.sort(naturalSort);var i,r='<select style="width:100%"><option value=""></option>',iLen=aData.length;for(i=0;i<iLen;i++)r+='<option value="'+aData[i]+'">'+aData[i]+"</option>";return r+"</select>"}leantime.appUrl=appURL,jQuery(document).on("click",function(e){jQuery('[data-toggle="popover"],[data-original-title]').each(function(){jQuery(this).is(e.target)||0!==jQuery(this).has(e.target).length||0!==jQuery(".popover").has(e.target).length||(((jQuery(this).popover("hide").data("bs.popover")||{}).inState||{}).click=!1)})}),leantime.replaceSVGColors=function(){jQuery(document).ready(function(){"#1b75bb"!=leantime.companyColor&&jQuery("svg").children().each(function(){"#1b75bb"==jQuery(this).attr("fill")&&jQuery(this).attr("fill",leantime.companyColor)})})},leantime.replaceSVGColors(),jQuery.noConflict(),jQuery(document).ready(function(){jQuery(".leftmenu .dropdown > a").click(function(){return jQuery(this).next().is(":visible")?jQuery(this).next().slideUp("fast"):jQuery(this).next().slideDown("fast"),!1}),0<jQuery(".widgettitle .close").length&&jQuery(".widgettitle .close").click(function(){jQuery(this).parents(".widgetbox").fadeOut(function(){jQuery(this).remove()})}),jQuery(".userloggedinfo img").click(function(){if(jQuery(window).width()<480){var dm=jQuery(".userloggedinfo .userinfo");dm.is(":visible")?dm.hide():dm.show()}}),jQuery(".dateFrom, .dateTo").datepicker(),jQuery("#dyntable2").dataTable({sPaginationType:"full_numbers",aaSortingFixed:[[0,"asc"]],fnDrawCallback:function(oSettings){}}),jQuery("#dyntable").dataTable({bScrollInfinite:!0,bScrollCollapse:!0,sScrollY:"300px"})}),jQuery(void(jQuery.fn.dataTableExt.oApi.fnGetColumnData=function(oSettings,iColumn,bUnique,bFiltered,bIgnoreEmpty){if(void 0===iColumn)return[];var aiRows;void 0===bUnique&&(bUnique=!0),void 0===bFiltered&&(bFiltered=!0),void 0===bIgnoreEmpty&&(bIgnoreEmpty=!0);for(var asResultData=[],i=0,c=(aiRows=1==bFiltered?oSettings.aiDisplay:oSettings.aiDisplayMaster).length;i<c;i++){iRow=aiRows[i];var sValue=removeHTMLTags(this.fnGetData(iRow)[iColumn]);1==bIgnoreEmpty&&0==sValue.length||1==bUnique&&-1<jQuery.inArray(sValue,asResultData)||asResultData.push(sValue)}return asResultData})),jQuery.fn.dataTableExt.oSort["natural-asc"]=function(a,b){return naturalSort(a,b)},jQuery.fn.dataTableExt.oSort["natural-desc"]=function(a,b){return-1*naturalSort(a,b)};var oTable="",oTable2="";jQuery(document).ready(function($){oTable=$("#resultTable").dataTable({sPaginationType:"full_numbers",bFilter:!0,fnDrawCallback:function(oSettings){},sDom:'<"H"<"left"l><"right"f>>rt<"F"<"left"i><"right"p>>',iDisplayLength:10,aLengthMenu:[[10,25,50,100,-1],[10,25,50,100,"Alle"]],oTableTools:{sSwfPath:"includes/libs/DataTables-1.7.6/extras/TableTools/media/swf/copy_cvs_xls_pdf.swf",aButtons:[{sExtends:"copy",sButtonText:"Copy",sButtonClass:"dataTablesCopy",sButtonClassHover:"dataTablesCopyHover"},{sExtends:"print",sButtonText:"Print",sButtonClass:"dataTablesPrint",sButtonClassHover:"dataTablesPrintHover",sInfo:"Dieses ist die Druckansicht. Benutzen Sie nun die Druckfunktion ihres Browsers. Drücken Sie ESC wenn Sie fertig sind."},{sExtends:"collection",sButtonText:"Exportieren",sButtonClass:"dataTablesExport",sButtonClassHover:"dataTablesExportHover",aButtons:["csv","xls","pdf"]}]},oColVis:{buttonText:"Hide Columns"},oLanguage:{sSearch:"Search:",sLengthMenu:"Show _MENU_ entries per page",sZeroRecords:"No results",sInfo:"Show _START_ to _END_ of _TOTAL_ entries",sInfoEmpty:"Show 0 to 0 of 0 Entries",sInfoFiltered:"(Filtered from _MAX_ entries)"}}),$("#resultTable tfoot tr.filter td:not(.noFilter)").each(function(i){this.innerHTML=fnCreateSelect(oTable.fnGetColumnData(i)),$("select",this).change(function(){oTable.fnFilter($(this).val(),i)})});$("#resultTable2").dataTable({sPaginationType:"full_numbers",bFilter:!0,fnDrawCallback:function(oSettings){},sDom:'<"H"<"left"l><"right"f>>rt<"F"<"left"i><"right"p>>',iDisplayLength:10,aLengthMenu:[[10,25,50,100,-1],[10,25,50,100,"Alle"]],oTableTools:{sSwfPath:"includes/libs/DataTables-1.7.6/extras/TableTools/media/swf/copy_cvs_xls_pdf.swf",aButtons:[{sExtends:"copy",sButtonText:"Copy",sButtonClass:"dataTablesCopy",sButtonClassHover:"dataTablesCopyHover"},{sExtends:"print",sButtonText:"Print",sButtonClass:"dataTablesPrint",sButtonClassHover:"dataTablesPrintHover",sInfo:"Dieses ist die Druckansicht. Benutzen Sie nun die Druckfunktion ihres Browsers. Drücken Sie ESC wenn Sie fertig sind."},{sExtends:"collection",sButtonText:"Exportieren",sButtonClass:"dataTablesExport",sButtonClassHover:"dataTablesExportHover",aButtons:["csv","xls","pdf"]}]},oColVis:{buttonText:"Hide Columns"},oLanguage:{sSearch:"Search:",sLengthMenu:"Show _MENU_ entries per page",sZeroRecords:"No results",sInfo:"Show _START_ to _END_ of _TOTAL_ entries",sInfoEmpty:"Show 0 to 0 of 0 Entries",sInfoFiltered:"(Filtered from _MAX_ entries)"}});$("#resultTable tfoot tr.filter td:not(.noFilter)").each(function(i){this.innerHTML=fnCreateSelect(oTable.fnGetColumnData(i)),$("select",this).change(function(){oTable.fnFilter($(this).val(),i)})});$("#resultTable3").dataTable({sPaginationType:"full_numbers",bFilter:!0,fnDrawCallback:function(oSettings){},sDom:'<"H"<"left"l><"right"f>>rt<"F"<"left"i><"right"p>>',iDisplayLength:10,aLengthMenu:[[10,25,50,100,-1],[10,25,50,100,"Alle"]],oTableTools:{sSwfPath:"includes/libs/DataTables-1.7.6/extras/TableTools/media/swf/copy_cvs_xls_pdf.swf",aButtons:[{sExtends:"copy",sButtonText:"Copy",sButtonClass:"dataTablesCopy",sButtonClassHover:"dataTablesCopyHover"},{sExtends:"print",sButtonText:"Print",sButtonClass:"dataTablesPrint",sButtonClassHover:"dataTablesPrintHover",sInfo:"Dieses ist die Druckansicht. Benutzen Sie nun die Druckfunktion ihres Browsers. Drücken Sie ESC wenn Sie fertig sind."},{sExtends:"collection",sButtonText:"Exportieren",sButtonClass:"dataTablesExport",sButtonClassHover:"dataTablesExportHover",aButtons:["csv","xls","pdf"]}]},oColVis:{buttonText:"Hide Columns"},oLanguage:{sSearch:"Search:",sLengthMenu:"Show _MENU_ entries per page",sZeroRecords:"No results",sInfo:"Show _START_ to _END_ of _TOTAL_ entries",sInfoEmpty:"Show 0 to 0 of 0 Entries",sInfoFiltered:"(Filtered from _MAX_ entries)"}});$("#resultTable tfoot tr.filter td:not(.noFilter)").each(function(i){this.innerHTML=fnCreateSelect(oTable.fnGetColumnData(i)),$("select",this).change(function(){oTable.fnFilter($(this).val(),i)})})}),leantime.dashboardController=function(){var _burndownChart="";jQuery(document).ready(function(){initTicketTimers()});var initTicketTimers=function(){jQuery(".punchIn").on("click",function(){var ticketId=jQuery(this).attr("value");jQuery.ajax({data:"ticketId="+ticketId,type:"POST",url:leantime.appUrl+"/tickets/showAll&raw=true&punchIn=true"}).done(function(msg){jQuery.jGrowl("Timer started!")});var currentdate=new Date,datetime=currentdate.getHours()+":"+currentdate.getMinutes()+" ";jQuery(".timerContainer .punchIn").hide(),jQuery("#timerContainer-"+ticketId+" .punchOut").show(),jQuery(".timerContainer .working").show(),jQuery("#timerContainer-"+ticketId+" .working").hide(),jQuery("#timerContainer-"+ticketId+" span.time").text(datetime)}),jQuery(".punchOut").on("click",function(){var ticketId=jQuery(this).attr("value");jQuery.ajax({data:"ticketId="+ticketId,type:"POST",url:leantime.appUrl+"/tickets/showAll&raw=true&punchOut=true"}).done(function(msg){0==msg?jQuery.jGrowl("You worked less than 6 minutes. Hours not logged"):jQuery.jGrowl("You logged "+msg+" hours")}),jQuery(".timerContainer .punchIn").show(),jQuery(".timerContainer .punchOut").hide(),jQuery(".timerContainer .working").hide(),jQuery(".timerHeadMenu").hide("slow")})};return{chartColors:{red:"rgb(201,48,44)",orange:"rgb(255, 159, 64)",yellow:"rgb(255, 205, 86)",green:"rgb(90,182,90)",blue:"rgb(54, 162, 235)",purple:"rgb(153, 102, 255)",grey:"rgb(201, 203, 207)"},initBurndown:function(labels,plannedData,actualData){var config={type:"line",data:{labels:labels,datasets:[{label:"Ideal",backgroundColor:leantime.dashboardController.chartColors.blue,borderColor:leantime.dashboardController.chartColors.blue,data:plannedData,fill:!1,lineTension:0},{label:"Actual",backgroundColor:leantime.dashboardController.chartColors.red,borderColor:leantime.dashboardController.chartColors.red,data:actualData,fill:!1,lineTension:0}]},options:{responsive:!0,maintainAspectRatio:!1,title:{display:!1,text:"Line Chart"},tooltips:{mode:"index",intersect:!1},hover:{mode:"nearest",intersect:!0},legend:{position:"bottom"},scales:{xAxes:[{display:!0,scaleLabel:{display:!0,labelString:"Day of the Sprint"}}],yAxes:[{display:!0,scaleLabel:{display:!0,labelString:"Effort"},ticks:{beginAtZero:!0}}]}}},ctx2=document.getElementById("sprintBurndown").getContext("2d");_burndownChart=new Chart(ctx2,config)},initChartButtonClick:function(id,plannedData,actualData){jQuery("#"+id).click(function(event){_burndownChart.data.datasets[0].data=plannedData,_burndownChart.data.datasets[1].data=actualData,_burndownChart.options.scales.yAxes[0].scaleLabel.labelString="Open To-Dos",jQuery("#NumChartButton, #EffortChartButton, #HourlyChartButton").removeClass("active"),jQuery(this).addClass("active"),_burndownChart.update()})},initBacklogBurndown:function(labels,actualData){var config={type:"line",data:{labels:labels,datasets:[{label:"Open To-Dos",backgroundColor:leantime.dashboardController.chartColors.red,borderColor:leantime.dashboardController.chartColors.red,data:actualData,fill:!1,lineTension:0,pointRadius:0}]},options:{responsive:!0,maintainAspectRatio:!1,title:{display:!1,text:"Line Chart"},tooltips:{mode:"index",intersect:!1},hover:{mode:"nearest",intersect:!0},legend:{position:"bottom"},elements:{point:{pointStyle:"line",radius:"0"}},scales:{xAxes:[{display:!0,scaleLabel:{display:!0,labelString:"Date"}}],yAxes:[{display:!0,scaleLabel:{display:!0,labelString:"# of open To-Dos"},ticks:{beginAtZero:!0}}]}}},ctx2=document.getElementById("backlogBurndown").getContext("2d");_burndownChart=new Chart(ctx2,config)},initBacklogChartButtonClick:function(id,actualData){jQuery("#"+id).click(function(event){_burndownChart.data.datasets[0].data=actualData,_burndownChart.options.scales.yAxes[0].scaleLabel.labelString="Open To-Dos",jQuery("#NumChartButton, #EffortChartButton, #HourlyChartButton").removeClass("active"),jQuery(this).addClass("active"),_burndownChart.update()})},initProgressChart:function(complete,incomplete){var config={type:"doughnut",data:{datasets:[{data:[complete,incomplete],backgroundColor:[leantime.dashboardController.chartColors.green,leantime.dashboardController.chartColors.grey],label:"Project Done"}],labels:[complete+"% Done",incomplete+"% Open"]},options:{maintainAspectRatio:!1,responsive:!0,legend:{position:"bottom"},title:{display:!1,text:""},animation:{animateScale:!0,animateRotate:!0}}},ctx=document.getElementById("chart-area").getContext("2d");new Chart(ctx,config)},initTicketTimers:initTicketTimers}}(),leantime.menuController=function(){jQuery(document).ready(function(){_initProjectSelector(),_initLeftMenuHamburgerButton(),_initProjectSelectorToggle()});var _initProjectSelector=function(){jQuery(".project-select").chosen()},_initLeftMenuHamburgerButton=function(){jQuery(".barmenu").hasClass("open")?(jQuery(".rightpanel, .headerinner").css({marginLeft:"260px"}),jQuery(".logo, .leftpanel").css({marginLeft:0}),leantime.menuRepository.updateUserMenuSettings("open")):(jQuery(".rightpanel, .headerinner").css({marginLeft:0}),jQuery(".logo, .leftpanel").css({marginLeft:"-260px"}),leantime.menuRepository.updateUserMenuSettings("closed")),jQuery(".barmenu").click(function(){jQuery(window).width(),jQuery(this).hasClass("open")?(jQuery(".rightpanel, .headerinner").animate({marginLeft:0},"fast",function(){jQuery(".barmenu").removeClass("open")}),jQuery(".logo, .leftpanel").animate({marginLeft:"-260px"},"fast"),leantime.menuRepository.updateUserMenuSettings("closed")):(jQuery(".rightpanel, .headerinner").animate({marginLeft:"260px"},"fast",function(){jQuery(".barmenu").addClass("open")}),jQuery(".logo, .leftpanel").animate({marginLeft:0},"fast"),leantime.menuRepository.updateUserMenuSettings("open"))}),jQuery(window).resize(function(){jQuery(".barmenu").hasClass("open")?(jQuery(".rightpanel, .headerinner").css({marginLeft:"260px"}),jQuery(".logo, .leftpanel").css({marginLeft:0}),leantime.menuRepository.updateUserMenuSettings("open")):(jQuery(".rightpanel, .headerinner").css({marginLeft:0}),jQuery(".logo, .leftpanel").css({marginLeft:"-260px"}),leantime.menuRepository.updateUserMenuSettings("closed"))})},_initProjectSelectorToggle=function(id,element){jQuery(document).on("click",".project-selector .dropdown-menu",function(e){e.stopPropagation()})};return{toggleClientList:function(id,element){jQuery(".client_"+id).toggle("fast"),jQuery(element).find("i").hasClass("fa-caret-down")?(jQuery(element).find("i").removeClass("fa-caret-down"),jQuery(element).find("i").addClass("fa-caret-up")):(jQuery(element).find("i").removeClass("fa-caret-up"),jQuery(element).find("i").addClass("fa-caret-down"))}}}(),(leantime=leantime||{}).menuRepository={updateUserMenuSettings:function(menuStateValue){jQuery.ajax({type:"PUT",url:leantime.appUrl+"/api/sessions",data:{menuState:menuStateValue}}).done(function(){})}},leantime.helperController=function(){jQuery(document).ready(function(){});return{showHelperModal:function(module,minW,minH){jQuery.nmManual(leantime.appUrl+"/help/showOnboardingDialog?module="+module,{sizes:{minW:minW||200,minH:minH||500},resizable:!0,autoSizable:!0,callbacks:{beforeShowCont:function(){leantime.replaceSVGColors()}}})},hideAndKeepHidden:function(module){leantime.helperRepository.updateUserModalSettings(module),jQuery.nmTop().close()},startDashboardTour:function(){leantime.helperRepository.startingTour(),jQuery.nmTop().close();var tour=new Shepherd.Tour({defaults:{classes:"shepherd-theme-arrows",showCancelLink:!0,scrollTo:!0}});tour.addStep("Left Nav",{title:"Left Navigation",text:"The left side bar represents your product development life cycle.<br />Everything in this menu belongs to the project selected above",attachTo:".leftmenu ul right",advanceOn:".headmenu click",buttons:[{text:"Cancel",classes:"shepherd-button-secondary",action:tour.cancel},{text:"Next",action:tour.next}]}),tour.addStep("Project Selection",{title:"Project Selection",text:"This is your main project selector. Click here to change in between projects. <br />Everything you do below is part of the current project.",attachTo:".project-selector right",buttons:[{text:"Back",classes:"shepherd-button-secondary",action:tour.back},{text:"Next",action:tour.next}]}),tour.addStep("Header Navigation",{title:"Top Navigation",text:"This is where you'll find your personal links.",attachTo:".headmenu bottom",advanceOn:"#sprintBurndownChart click",buttons:[{text:"Back",classes:"shepherd-button-secondary",action:tour.back},{text:"Next",action:tour.next}]}),tour.addStep("Sprint Burndown",{title:"Sprint Burndown",text:'This burn down chart shows tasks versus time.<br /> You can sort by effort, by hours, and by # of To Dos.<br />To learn more about agile sprints and burn down charts <a href="http://help.leantime.io/knowledge-base/what-is-a-sprint" target="_blank">click here</a>',attachTo:"#sprintBurndownChart bottom",advanceOn:".headmenu click",buttons:[{text:"Back",classes:"shepherd-button-secondary",action:tour.back},{text:"Next",action:tour.next}]}),tour.addStep("Project Status",{title:"Project Progress",text:"Using items such as Effort, Hours, and # of To Dos, we'll<br />help predict estimated project completion.<br />",attachTo:"#projectProgressContainer left",advanceOn:".headmenu click",buttons:[{text:"Back",classes:"shepherd-button-secondary",action:tour.back},{text:"Next",action:tour.next}]}),tour.addStep("Your Todos",{title:"Milestone Progress",text:"This progress bar chart shows Milestone completion with their anticipated end dates.",attachTo:"#milestoneProgressContainer left",advanceOn:".headmenu click",buttons:[{text:"Back",classes:"shepherd-button-secondary",action:tour.back},{text:"Next",action:tour.next}]}),tour.addStep("Your Todos",{title:"Your ToDos",text:"Here are the To - Dos currently assigned to you. <br />You'll see which To-Dos are due this week and which ones are due at a later time.",attachTo:"#yourToDoContainer top",advanceOn:".headmenu click",buttons:[{text:"Back",classes:"shepherd-button-secondary",action:tour.back},{text:"Next",action:tour.next}]}),tour.addStep("Your Todos",{title:"Congratulations!",text:"That completes the Dashboard overview!  Great work!<br /> Next Stop: Create your first project!",buttons:[{text:"Close",action:tour.cancel},{text:"Go to Projects",events:{click:function(){window.location.href=leantime.appUrl+"/projects/newProject/"}}}],advanceOn:".headmenu click"}),tour.start()},startKanbanTour:function(){jQuery.nmTop().close();var tour=new Shepherd.Tour({defaults:{classes:"shepherd-theme-arrows",showCancelLink:!0,scrollTo:!0}});tour.addStep("Left Nav",{title:"Kanban",text:"These lanes represent where you and your team are with the To Dos.  <br /> New, blocked, In Progress, Needs Approval, Done.",attachTo:".column right",advanceOn:".headmenu click",buttons:[{text:"Cancel",classes:"shepherd-button-secondary",action:tour.cancel},{text:"Next",action:tour.next}]}),tour.addStep("Left Nav",{title:"Drag & Drop",text:"You can drag and drop these cards from one state to the next. <br />A click on the headline will bring you to the details of this ToDo.",attachTo:".ticketBox h4 right",advanceOn:".ticketBox click",buttons:[{text:"Back",classes:"shepherd-button-secondary",action:tour.back},{text:"Next",action:tour.next}]}),tour.addStep("More buttons",{title:"Sprint",text:"Shows your current sprint or lets you create a new one.",attachTo:".currentSprint bottom",advanceOn:".ticketBox click",buttons:[{text:"Back",classes:"shepherd-button-secondary",action:tour.back},{text:"Next",action:tour.next}]}),tour.addStep("Change Views",{title:"Change Views",text:"These buttons let you switch between Backlog and Kanban View",attachTo:".btn-group .fa-columns left",advanceOn:".ticketBox click",buttons:[{text:"Back",classes:"shepherd-button-secondary",action:tour.back},{text:"Next",action:tour.next}]}),tour.addStep("Your Todos",{title:"Congratulations!",text:'You have completed the tour!<br />If you need more help. Click the "Need Help" Button on the bottom of the page. <br /> <br />Don\'t hesitate to reach out to our awesome support team for any additional help! <br />We are here to make your life easier.',buttons:[{text:"Close",action:tour.complete}],advanceOn:".headmenu click"}),tour.on("complete",function(){leantime.helperRepository.stopTour()}),tour.start()},startBacklogTour:function(){jQuery.nmTop().close();var tour=new Shepherd.Tour({defaults:{classes:"shepherd-theme-arrows",showCancelLink:!0,scrollTo:!0}});tour.addStep("Left Nav",{title:"Drag & Drop",text:"Drag and drop To Dos from one state to the next.<br />Click on the headline to see the details of the To Do.",attachTo:".ticketBox h3 top",advanceOn:".ticketBox click",buttons:[{text:"Cancel",classes:"shepherd-button-secondary",action:tour.cancel},{text:"Next",action:tour.next}]}),tour.addStep("Left Nav",{title:"Milestones",text:"Already created Milestones? <br/>Click to assign it to the To Do.",attachTo:".milestonePopover .f-left right",advanceOn:".ticketBox click",buttons:[{text:"Back",classes:"shepherd-button-secondary",action:tour.back},{text:"Next",action:tour.next}]}),tour.addStep("Left Nav",{title:"Efforts",text:"Select To Do effort here.<br/>We measure effort in T-shirt sizes.",attachTo:".effortPopover .f-left  right",advanceOn:".ticketBox click",buttons:[{text:"Back",classes:"shepherd-button-secondary",action:tour.back},{text:"Next",action:tour.next}]}),tour.addStep("Left Nav",{title:"Status",text:"This box shows where you are with a task.<br/>Click to see more.",attachTo:".popoverbtn right",advanceOn:".ticketBox click",buttons:[{text:"Back",classes:"shepherd-button-secondary",action:tour.back},{text:"Next",action:tour.next}]}),tour.addStep("Left Nav",{title:"User",text:"Click here to assign a To Do and quickly see who's working on it.",attachTo:".userPopover .author right",advanceOn:".ticketBox click",buttons:[{text:"Back",classes:"shepherd-button-secondary",action:tour.back},{text:"Next",action:tour.next}]}),tour.addStep("Left Nav",{title:"Quick Add",text:"Click here to fast add a to-do item to the backlog.",attachTo:".quickAddLink bottom",advanceOn:".ticketBox click",buttons:[{text:"Back",classes:"shepherd-button-secondary",action:tour.back},{text:"Next",action:tour.next}]}),tour.addStep("Sprint Drag",{title:"Sprint",text:"Drag and drop items from the backlog and place them into your current Sprint.",attachTo:"#sortableSprint bottom",advanceOn:".ticketBox click",buttons:[{text:"Back",classes:"shepherd-button-secondary",action:tour.back},{text:"Next",action:tour.next}]}),tour.addStep("More buttons",{title:"Add or Filter",text:"Add more or sort your To-Dos by filter.",attachTo:".btn-group button bottom",advanceOn:".ticketBox click",buttons:[{text:"Back",classes:"shepherd-button-secondary",action:tour.back},{text:"Next",action:tour.next}]}),tour.addStep("Change Views",{title:"User",text:"This tab will take you to the Kanban view of your To Dos.",attachTo:".btn-group .fa-columns left",advanceOn:".ticketBox click",buttons:[{text:"Back",classes:"shepherd-button-secondary",action:tour.back},{text:"Next",action:tour.next}]}),tour.addStep("Your Todos",{title:"Congratulations!",text:"It's now time to create your first Sprint!<br />Click the Create New Sprint button get started.",buttons:[{text:"Close",action:tour.cancel}],advanceOn:".headmenu click"}),tour.start()}}}(),(leantime=leantime||{}).helperRepository={updateUserModalSettings:function(module){jQuery.ajax({type:"PUT",url:"/api/users",data:{settings:module,patchModalSettings:1}}).done(function(){})},startingTour:function(){jQuery.ajax({type:"PUT",url:"/api/sessions",data:{tourActive:1}}).done(function(){})},stopTour:function(){jQuery.ajax({type:"PUT",url:"/api/sessions",data:{tourActive:0}}).done(function(){})}},leantime.ideasController=function(){var closeModal=!1,canvasoptions={sizes:{minW:700,minH:650},resizable:!0,autoSizable:!0,callbacks:{beforeShowCont:function(){jQuery(".showDialogOnLoad").show(),1==closeModal&&(closeModal=!1,location.reload())},afterShowCont:function(){jQuery(".ideaModal, #commentForm, #commentForm .deleteComment, .leanCanvasMilestone .deleteMilestone").nyroModal(canvasoptions),jQuery("textarea.tinymce").tinymce({width:"98%",height:"200",content_style:"img { max-width: 100%; }",plugins:"autolink,link,textcolor,image,lists,pagebreak,table,save,insertdatetime,preview,media,searchreplace,print,paste,directionality,fullscreen,noneditable,visualchars,nonbreaking,template,advlist",toolbar:"bold,italic,strikethrough,|,fontsizeselect,forecolor,|,link,unlink,image,|,bullist,|,fullscreen",branding:!1,menubar:!1,statusbar:!1,convert_urls:!1,paste_data_images:!0,images_upload_handler:function(blobInfo,success,failure){var xhr,formData;(xhr=new XMLHttpRequest).withCredentials=!1,xhr.open("POST",leantime.appUrl+"/api/files"),xhr.onload=function(){xhr.status<200||300<=xhr.status?failure("HTTP Error: "+xhr.status):success(xhr.responseText)},(formData=new FormData).append("file",blobInfo.blob()),xhr.send(formData)},file_browser_callback:function(field_name,url,type,win){window.tinyMceUploadFieldname=field_name;var shortOptions={afterShowCont:function(){jQuery(".fileModal").nyroModal({callbacks:shortOptions})}};jQuery.nmManual(leantime.appUrl+"/files/showAll&modalPopUp=true",{stack:!0,callbacks:shortOptions}),jQuery.nmTop().elts.cont.css("zIndex","1000010"),jQuery.nmTop().elts.bg.css("zIndex","1000010"),jQuery.nmTop().elts.load.css("zIndex","1000010"),jQuery.nmTop().elts.all.find(".nyroModalCloseButton").css("zIndex","1000010")}})},beforeClose:function(){location.reload()}},titleFromIframe:!0};jQuery(document).ready(function(){_initModals()});var _initModals=function(){jQuery(".ideaModal, #commentForm, #commentForm .deleteComment, .leanCanvasMilestone .deleteMilestone").nyroModal(canvasoptions)};return{setCloseModal:function(){closeModal=!0},toggleMilestoneSelectors:function(trigger){"existing"==trigger&&(jQuery("#newMilestone, #milestoneSelectors").hide("fast"),jQuery("#existingMilestone").show(),_initModals()),"new"==trigger&&(jQuery("#newMilestone").show(),jQuery("#existingMilestone, #milestoneSelectors").hide("fast"),_initModals()),"hide"==trigger&&(jQuery("#newMilestone, #existingMilestone").hide("fast"),jQuery("#milestoneSelectors").show("fast"))},openModalManually:function(url){jQuery.nmManual(url,canvasoptions)}}}(),leantime.leanCanvasController=function(){var closeModal=!1,canvasoptions={sizes:{minW:700,minH:850},resizable:!0,autoSizable:!0,callbacks:{beforeShowCont:function(){jQuery(".showDialogOnLoad").show(),1==closeModal&&(closeModal=!1,location.reload())},afterShowCont:function(){jQuery(".canvasModal, #commentForm, #commentForm .deleteComment, .leanCanvasMilestone .deleteMilestone").nyroModal(canvasoptions)},beforeClose:function(){location.reload()}},titleFromIframe:!0};jQuery(document).ready(function(){_initModals()});var _initModals=function(){jQuery(".canvasModal, #commentForm, #commentForm .deleteComment, .leanCanvasMilestone .deleteMilestone").nyroModal(canvasoptions)};return{setCloseModal:function(){closeModal=!0},toggleMilestoneSelectors:function(trigger){"existing"==trigger&&(jQuery("#newMilestone, #milestoneSelectors").hide("fast"),jQuery("#existingMilestone").show(),_initModals()),"new"==trigger&&(jQuery("#newMilestone").show(),jQuery("#existingMilestone, #milestoneSelectors").hide("fast"),_initModals()),"hide"==trigger&&(jQuery("#newMilestone, #existingMilestone").hide("fast"),jQuery("#milestoneSelectors").show("fast"))},openModalManually:function(url){jQuery.nmManual(url,canvasoptions)}}}(),leantime.settingController=function(){var _uploadResult,clearCroppie=function(){jQuery("#logoImg").croppie("destroy"),jQuery("#previousImage").show()};return{readURL:function(input){if(clearCroppie(),input.files&&input.files[0]){var reader=new FileReader,profileImg=jQuery("#logoImg");reader.onload=function(e){(_uploadResult=profileImg.croppie({enableExif:!0,enforceBoundary:!1,viewport:{width:260,height:60,type:"square"},boundary:{width:400,height:200}})).croppie("bind",{url:e.currentTarget.result}),jQuery("#previousImage").hide()},reader.readAsDataURL(input.files[0])}},clearCroppie:clearCroppie,saveCroppie:function(){jQuery("#save-logo").addClass("running"),jQuery("#logoImg").attr("src","/images/loaders/loader28.gif"),_uploadResult.croppie("result",{type:"blob",circle:!1,size:"original",quality:1}).then(function(result){leantime.settingService.saveLogo(result)})}}}(),leantime.settingRepository={saveLogo:function(photo){var formData=new FormData;formData.append("file",photo),jQuery.ajax({type:"POST",url:leantime.appUrl+"/api/setting",data:formData,processData:!1,contentType:!1}).success(function(resp){jQuery("#save-logo").removeClass("running"),location.reload()}).error(function(err){console.log(err)})}},leantime.settingService={saveLogo:function(photo){leantime.settingRepository.saveLogo(photo)}},leantime.ticketsController=function(){var milestoneModalConfig={sizes:{minW:500,minH:750},resizable:!0,autoSizable:!0,callbacks:{beforeShowCont:function(){jQuery(".showDialogOnLoad").show()},afterShowCont:function(){jQuery(".showDialogOnLoad").show(),_initSprintDates(),_initSimpleColorPicker(),jQuery(".formModal, #commentForm, .deleteComment").nyroModal(milestoneModalConfig)},beforeClose:function(){location.reload()}},titleFromIframe:!0};jQuery(document).ready(function(){_initDueDateTimePickers(),_initDates(),_initModals(),_initSprintPopover(),_initMilestonePopover(),_initUserPopover(),_initEffortPopover(),_initTicketEditor(),_initToolTips()});var _initDates=function(){jQuery(".dates").datepicker({dateFormat:"mm/dd/yy"})},_initSprintDates=function(){Date.prototype.addDays=function(days){return this.setDate(this.getDate()+days),this},jQuery.datepicker.setDefaults({beforeShow:function(i){if(jQuery(i).attr("readonly"))return!1}});var from=jQuery("#sprintStart").datepicker({numberOfMonths:1}).on("change",function(){to.datepicker("option","minDate",getDate(this));var newEndDate=getDate(this).addDays(13);to.datepicker("setDate",newEndDate)}),to=jQuery("#sprintEnd").datepicker({defaultDate:"+1w",numberOfMonths:1}).on("change",function(){from.datepicker("option","maxDate",getDate(this))});function getDate(element){var date;try{date=jQuery.datepicker.parseDate("mm/dd/yy",element.value)}catch(error){date=null,console.log(error)}return console.log(date),date}},_initToolTips=function(){jQuery('[data-toggle="tooltip"]').tooltip()},_initModals=function(){var regularModelConfig={callbacks:{afterShowCont:function(){jQuery(".showDialogOnLoad").show(),_initDates(),jQuery(".regularModal, .formModal").nyroModal(regularModelConfig)}}};jQuery(".regularModal").nyroModal(regularModelConfig);var editLabelModalConfig={callbacks:{afterShowCont:function(){jQuery(".editLabelModal").nyroModal(editLabelModalConfig)},beforeClose:function(){location.reload()}}};jQuery(".editLabelModal").nyroModal(editLabelModalConfig);var sprintModalConfig={sizes:{minW:300,minH:350},resizable:!0,autoSizable:!0,callbacks:{afterShowCont:function(){_initSprintDates(),_initToolTips(),jQuery(".formModal").nyroModal(sprintModalConfig)},beforeClose:function(){location.reload()}},titleFromIframe:!0};jQuery(".sprintModal").nyroModal(sprintModalConfig);var modalConfig={sizes:{minW:500,minH:750},resizable:!0,autoSizable:!0,callbacks:{beforeShowCont:function(){jQuery(".showDialogOnLoad").show()},afterShowCont:function(){jQuery(".showDialogOnLoad").show(),function(){var from=jQuery("#milestoneEditFrom").datepicker({numberOfMonths:1}).on("change",function(){to.datepicker("option","minDate",getDate(this))}),to=jQuery("#milestoneEditTo").datepicker({defaultDate:"+1w",numberOfMonths:1}).on("change",function(){from.datepicker("option","maxDate",getDate(this))});function getDate(element){var date;try{date=jQuery.datepicker.parseDate("mm/dd/yy",element.value)}catch(error){date=null,console.log(error)}return console.log(date),date}}(),_initSimpleColorPicker(),jQuery(".formModal, #commentForm, .deleteComment").nyroModal(modalConfig)},beforeClose:function(){location.reload()}},titleFromIframe:!0};jQuery(".milestoneModal").nyroModal(modalConfig)},_initSprintPopover=function(){jQuery(".sprintPopover").popover({template:'<div class="popover sprintPopoverContainer" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),jQuery("body").on("click",".sprintPopoverContainer input",function(){var ticket=jQuery(this).attr("name").split("_"),val=jQuery(this).val();jQuery.ajax({type:"PUT",url:leantime.appUrl+"/api/tickets",data:{id:ticket[1],sprint:val}}).done(function(){})})},_initEffortPopover=function(){jQuery(".effortPopover").popover({template:'<div class="popover effortPopoverContainer" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'});var storyPointLabels={1:"XS",2:"S",3:"M",5:"L",8:"XL",13:"XXL"};jQuery("body").on("click",".effortPopoverContainer input",function(){var ticket=jQuery(this).attr("name").split("_"),val=jQuery(this).val();jQuery.ajax({type:"PUT",url:leantime.appUrl+"/api/tickets",data:{id:ticket[1],storypoints:val}}).done(function(){jQuery("#effort-"+ticket[1]).text(storyPointLabels[val]),jQuery(".effortPopover").popover("hide")})})},_initMilestonePopover=function(){jQuery(".milestonePopover").popover({template:'<div class="popover milestonePopoverContainer" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),jQuery("body").on("click",".milestonePopoverContainer input",function(){var ticket=jQuery(this).attr("name").split("_"),val=jQuery(this).val(),label=jQuery(this).attr("data-label"),color=jQuery(this).attr("data-color");jQuery.ajax({type:"PUT",url:leantime.appUrl+"/api/tickets",data:{id:ticket[1],dependingTicketId:val}}).done(function(){jQuery("#milestone-"+ticket[1]).text(label),jQuery("#milestone-"+ticket[1]).css("backgroundColor",color),jQuery(".milestonePopover").popover("hide")})})},_initUserPopover=function(){jQuery(".userPopover").popover({template:'<div class="popover userPopoverContainer" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),jQuery("body").on("click",".userPopoverContainer input",function(){var ticket=jQuery(this).attr("name").split("_"),val=jQuery(this).val(),label=jQuery(this).attr("data-label");jQuery.ajax({type:"PUT",url:leantime.appUrl+"/api/tickets",data:{id:ticket[1],editorId:val}}).done(function(){jQuery("#user"+ticket[1]).text(label),jQuery(".userPopover").popover("hide")})})},_initSimpleColorPicker=function(){jQuery("input.simpleColorPicker").simpleColorPicker({colors:["#064779","#1B76BB","#00814A","#35CB8B","#F3B600","#FFD042","#BC3600","#F34500"],onChangeColor:function(color){jQuery(this).css("background",color)}});var currentColor=jQuery("input.simpleColorPicker").val();""!=currentColor&&jQuery("input.simpleColorPicker").css("background",currentColor)},_initTicketEditor=function(){jQuery("textarea.tinymce").tinymce({width:"98%",height:"300",content_style:"img { max-width: 100%; }",plugins:"autolink,link,textcolor,image,lists,pagebreak,table,save,insertdatetime,preview,media,searchreplace,print,paste,directionality,fullscreen,noneditable,visualchars,nonbreaking,template,advlist",toolbar:"bold,italic,strikethrough,|,fontsizeselect,forecolor,|,link,unlink,image,|,bullist,|,fullscreen",branding:!1,menubar:!1,statusbar:!1,convert_urls:!1,paste_data_images:!0,images_upload_handler:function(blobInfo,success,failure){var xhr,formData;(xhr=new XMLHttpRequest).withCredentials=!1,xhr.open("POST","/api/files"),xhr.onload=function(){xhr.status<200||300<=xhr.status?failure("HTTP Error: "+xhr.status):success(xhr.responseText)},(formData=new FormData).append("file",blobInfo.blob()),xhr.send(formData)},file_browser_callback:function(field_name,url,type,win){window.tinyMceUploadFieldname=field_name;var shortOptions={afterShowCont:function(){jQuery(".fileModal").nyroModal({callbacks:shortOptions})}};jQuery.nmManual(leantime.appUrl+"/files/showAll&modalPopUp=true",{stack:!0,callbacks:shortOptions}),jQuery.nmTop().elts.cont.css("zIndex","1000010"),jQuery.nmTop().elts.bg.css("zIndex","1000010"),jQuery.nmTop().elts.load.css("zIndex","1000010"),jQuery.nmTop().elts.all.find(".nyroModalCloseButton").css("zIndex","1000010")}}),jQuery("#type").change(function(){var templates={Story:"As <i>{{ TYPE OF USER }}, I would like to <i>{{ DESCRIBE THE FEATURE }}</i>, so that <i>{{ DESCRIBE THE REASON }}</i><br /><br /><strong>Acceptance Critria</strong><br /><ul><li><i>{{ DESCRIBE THE FEATURES YOU EXPECT AT A MINIMUM }}</i></li></ul>",Bug:"<strong>Summary</strong><br /><i>{{ DESCRIBE WHAT IS HAPPENING }}</i><br /><br /><strong>Steps to Reproduce</strong><br /><i>{{ DESCRIBE HOW YOU GOT THERE }}</i><br /><br /><strong>Expected Results</strong><br /><i>{{ WHAT OUTCOME DID YOU EXPECT}}</i><br /><br /><strong>Actual Results</strong><br /><i>{{ WHAT WAS THE ACTUAL RESULT}}</i>"},currentValue=jQuery("#ticketDescription").val().replace(/(\r\n\t|\n|\r\t)/gm,"");if(""==currentValue||jQuery(currentValue).text()==jQuery(templates.Story).text()||jQuery(currentValue).text()==jQuery(templates.Bug).text()){var selection=jQuery(this).val();jQuery("#ticketDescription").val(templates[selection])}})},_initDueDateTimePickers=function(){jQuery(".quickDueDates").datepicker({dateFormat:"mm/dd/yy",onSelect:function(date){var dateTime=new Date(date);dateTime=moment(dateTime).format("YYYY-MM-DD HH:mm:ss");var id=jQuery(this).attr("data-id"),newDate=dateTime;leantime.ticketsRepository.updateDueDates(id,newDate,function(){jQuery.jGrowl("Due date changed!")})}})};return{toggleFilterBar:function(){jQuery(".filterBar").toggle("fast")},triggerMilestoneModal:function(id){jQuery.nmManual(leantime.appUrl+"/tickets/editMilestone/"+id,milestoneModalConfig)},initGanttChart:function(tasks,viewMode){jQuery(document).ready(function(){var gantt_chart=new Gantt("#gantt",tasks,{custom_popup_html:function(task){var end_date=task._end.format("MMM D");return'<div class="details-container"> <h4><a href="'+leantime.appUrl+"/tickets/editMilestone/"+task.id+'" class="milestoneModal">'+task.name+"</a></h4><br /> <p>Expected to finish by <strong>"+end_date+"</strong><br /> "+Math.round(task.progress)+'% completed!</p> <a href="'+leantime.appUrl+"/tickets/editMilestone/"+task.id+'" class="milestoneModal"><span class="fa fa-map"></span> Edit Milestone</a> | <a href="'+leantime.appUrl+"/tickets/showKanban&milestone="+task.id+'"><span class="iconfa-pushpin"></span> View To-Dos</a> </div>'},on_click:function(task){},on_date_change:function(task,start,end){leantime.ticketsRepository.updateMilestoneDates(task.id,start,end),_initModals()},on_progress_change:function(task,progress){},on_view_change:function(mode){leantime.usersRepository.updateUserViewSettings("roadmap",mode),_initModals()}});jQuery(".btn-group").on("click","button",function(){$btn=jQuery(this);var mode=$btn.text();gantt_chart.change_view_mode(mode),$btn.parent().find("button").removeClass("active"),$btn.addClass("active")}),gantt_chart.change_view_mode(viewMode)})},updateRemaining:function(element,id){var value=jQuery(element).val();leantime.ticketsRepository.updateRemainingHours(id,value,function(){jQuery.jGrowl("Remaining Hours updated!")})},initModals:function(){_initModals()},openMilestoneModalManually:function(url){jQuery.nmManual(url,milestoneModalConfig)}}}(),(leantime=leantime||{}).ticketsRepository={updateMilestoneDates:function(id,start,end){jQuery.ajax({type:"PUT",url:leantime.appUrl+"/api/tickets",data:{id:id,editFrom:start.format("YYYY-MM-DD"),editTo:end.format("YYYY-MM-DD")}}).done(function(){})},updateRemainingHours:function(id,remaining,callbackSuccess){jQuery.ajax({type:"PUT",url:leantime.appUrl+"/api/tickets",data:{id:id,hourRemaining:remaining}}).done(function(){callbackSuccess()})},updateDueDates:function(id,date,callbackSuccess){jQuery.ajax({type:"PUT",url:leantime.appUrl+"/api/tickets",data:{id:id,dateToFinish:date}}).done(function(){callbackSuccess()})}},leantime.usersController=function(){var _uploadResult,clearCroppie=function(){jQuery("#profileImg").croppie("destroy"),jQuery("#previousImage").show()};return{readURL:function(input){if(clearCroppie(),input.files&&input.files[0]){var reader=new FileReader,profileImg=jQuery("#profileImg");reader.onload=function(e){(_uploadResult=profileImg.croppie({enableExif:!0,viewport:{width:175,height:175,type:"circle"},boundary:{width:200,height:200}})).croppie("bind",{url:e.currentTarget.result}),jQuery("#previousImage").hide()},reader.readAsDataURL(input.files[0])}},clearCroppie:clearCroppie,saveCroppie:function(){jQuery("#save-picture").addClass("running"),jQuery("#profileImg").attr("src",leantime.appUrl+"/images/loaders/loader28.gif"),_uploadResult.croppie("result",{type:"blob",circle:!0}).then(function(result){leantime.usersService.saveUserPhoto(result)})}}}(),leantime.usersRepository={saveUserPhoto:function(photo){var formData=new FormData;formData.append("file",photo),jQuery.ajax({type:"POST",url:leantime.appUrl+"/api/users",data:formData,processData:!1,contentType:!1}).success(function(resp){console.log(resp),jQuery("#save-picture").removeClass("running"),location.reload()}).error(function(err){console.log(err)})},updateUserViewSettings:function(module,value){jQuery.ajax({type:"PUT",url:leantime.appUrl+"/api/users",data:{patchViewSettings:module,value:value}}).done(function(){})}},leantime.usersService={saveUserPhoto:function(photo){leantime.usersRepository.saveUserPhoto(photo)}};
//# sourceMappingURL=jsSourceMapAPP.map
